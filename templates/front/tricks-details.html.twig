{% extends 'base.html.twig' %}

{% block body %}
    <main id="main">

        <!-- ======= Breadcrumbs Section ======= -->
        <section class="breadcrumbs">
            <div class="container">

                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex flex-column align-items-start">
                        <h2>{{ trick.title }}</h2>
                        <blockquote class="blockquote-footer">Créé par {{ trick.user.username~ " le " ~trick.createdAt | date('d/m/Y à H:i') }}
                            <a href="#tricks-comments" class="btn btn-outline-secondary count-comments" role="button"><i class="fa fa-comments"> {{ trick.comments | length }} commentaires</i></a>
                        </blockquote>
                    </div>
                    <ol>
                        <li><a href="/">Home</a></li>
                        <li><a href="/">Tricks</a></li>
                        <li>{{ trick.title | slice(0, 15) }}...</li>
                    </ol>
                </div>

            </div>
        </section><!-- Breadcrumbs Section -->

        <!-- ======= Tricks Details Section ======= -->
        <section class="tricks-details">
            <div class="container">

                <div class="tricks-details-container">
                        <img src="{{ asset('/img/tricks/' ~ trick.image) }}" class="img-fluid" alt="">

                    <div class="tricks-info">
                        <h3>Snow tricks informations</h3>
                        <ul>
                            <li><strong>Position</strong>: {{ trick.position }}</li>
                            <li><strong>Grabs</strong>: {{ trick.grabs }}</li>
                            <li><strong>Rotation</strong>: {{ trick.rotation }}</li>
                            <li><strong>Flip</strong>: {{ trick.flip }}</li>
                            <li><strong>Slide</strong>: {{ trick.slide }}</li>
                        </ul>
                    </div>

                </div>

                <div id="sliders-details" class="container col-12">
                    <div id="carouselForImages" class="carousel slide col-md-6 col-12" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselForImages" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselForImages" data-slide-to="1"></li>
                            <li data-target="#carouselForImages" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="https://placehold.it/100x50" class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="https://placehold.it/100x50" class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="https://placehold.it/100x50" class="d-block w-100" alt="...">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselForImages" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselForImages" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <div id="carouselForVideos" class="carousel slide col-md-6 col-12" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselForVideos" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselForVideos" data-slide-to="1"></li>
                            <li data-target="#carouselForVideos" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="https://placehold.it/100x50" class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="https://placehold.it/100x50" class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="https://placehold.it/100x50" class="d-block w-100" alt="...">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselForVideos" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselForVideos" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>

                <div class="tricks-description">
                    <h2>{{ trick.title }}</h2>
                   {{ trick.description | raw }}
                </div>
                <div class="tricks-description">
                    <blockquote class="blockquote-footer">Historique des contributeurs de l'article :
                            {%  for trickHistory in trick.trickHistories %}
                                <ul class="list-group list-group-flush">
                                    <li>{{ trickHistory.modifiedAt | date('d/m/Y à H:i')~" (contributeur : "~trickHistory.user.username }})</li>
                                </ul>
                            {% endfor %}
                    </blockquote>
                </div>
            </div>
        </section><!-- End Tricks Details Section -->
        <!-- ======= Tricks Comments Section ======= -->
        <section class="tricks-comments" id="tricks-comments">
            <div class="container">
                {% if not app.user %}
                <div class="tricks-connection col-10">
                    <a href="{{ path('security_login') }}">Connectez-vous</a> ou <a href="{{ path('security_registration') }}">inscrivez-vous</a> pour participer à la conversation !
                </div>
                {% endif %}
                <div class="list-group">
                    {% for comments in trick.comments %}
                    <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">{{ comments.title }}</h5>
                            <small class="text-muted">{{ comments.createdAt | date('d/m/Y à H:i') }} - {{ comments.user.username }} <img src="{{ comments.user.image }}"></small>
                        </div>
                        <p class="mb-1">{{ comments.content | raw }}</p>
                    </a>
                    {% endfor %}
                </div>
            </div>
        </section>
        <!-- End Tricks Comments Section -->

    </main><!-- End #main -->
{% endblock %}